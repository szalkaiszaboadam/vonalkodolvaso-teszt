<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fot√≥s Vonalk√≥d Olvas√≥</title>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    
    <style>
        body { font-family: sans-serif; text-align: center; background: #eee; margin: 0; padding: 20px; }
        
        h2 { color: #333; margin-bottom: 30px; }

        /* A nagy gomb st√≠lusa */
        .upload-btn-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            margin-bottom: 20px;
        }

        .btn {
            border: 2px solid gray;
            color: white;
            background-color: #2a9d8f;
            padding: 20px 40px;
            border-radius: 50px; /* Lekerek√≠tett gomb */
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 300px;
        }

        .btn:active { transform: scale(0.98); }

        /* Az igazi input mez≈ët elrejtj√ºk a gomb m√∂g√© */
        .upload-btn-wrapper input[type=file] {
            font-size: 100px;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
            width: 100%;
            height: 100%;
        }

        /* Eredm√©ny doboz */
        #result-box {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            font-size: 1.2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-height: 50px;
        }
        
        #scanned-result { font-weight: bold; color: #e76f51; font-size: 1.5rem; display: block; margin-top: 10px;}
        
        #status-msg { color: #666; font-size: 0.9rem; font-style: italic; }

        /* Ez a div kell a html5-qrcode m≈±k√∂d√©s√©hez, de nem kell l√°tsz√≥dnia */
        #reader { display: none; }
    </style>
</head>
<body>

    <h2>üì∑ Fot√≥s Szkenner</h2>
    
    <p style="margin-bottom: 20px;">K√©sz√≠ts egy fot√≥t a vonalk√≥dr√≥l!</p>

    <div class="upload-btn-wrapper">
        <button class="btn">üì∏ FOT√ìZ√ÅS IND√çT√ÅSA</button>
        <input type="file" id="qr-input-file" accept="image/*" capture="environment" onchange="scanFromFile(this)">
    </div>

    <div id="result-box">
        <div id="status-msg">Az eredm√©ny itt jelenik meg...</div>
        <span id="scanned-result"></span>
    </div>

    <div id="reader"></div>

    <script>
        const html5QrCode = new Html5Qrcode("reader");

        function scanFromFile(inputElement) {
            if (inputElement.files.length === 0) {
                return;
            }

            const imageFile = inputElement.files[0];
            
            // Ki√≠rjuk, hogy dolgozik a g√©p
            document.getElementById("status-msg").innerText = "Feldolgoz√°s folyamatban...";
            document.getElementById("scanned-result").innerText = "";

            // Beolvassuk a k√©pet
            html5QrCode.scanFile(imageFile, true)
                .then(decodedText => {
                    // SIKER!
                    document.getElementById("status-msg").innerText = "Sikeres beolvas√°s:";
                    document.getElementById("scanned-result").innerText = decodedText;
                })
                .catch(err => {
                    // HIBA (nem tal√°lt k√≥dot)
                    console.log(err);
                    document.getElementById("status-msg").innerText = "Nem tal√°ltam vonalk√≥dot a k√©pen. Pr√≥b√°ld √∫jra √©lesebben!";
                    document.getElementById("scanned-result").innerText = "";
                });
        }
    </script>
</body>
</html>